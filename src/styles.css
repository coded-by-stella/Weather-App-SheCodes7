@import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap");

/* ====== Tokens ====== */
:root{
  --radius: 20px;
  --glass: rgba(255,255,255,.28);
  --glass-border: rgba(255,255,255,.35);
  --text: #1f2937;
  --card-shadow: 0 10px 30px rgba(0,0,0,.15);
}

/* ====== Base ====== */
*{ box-sizing: border-box; }
html, body { height: 100%; }
body{
  margin: 0;
  font-family: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  color: var(--text);
  overflow-x: hidden;
  background: #cfefff; /* base fallback color */
  transition: background 600ms ease;
}

/* ====== Header & Search ====== */
header{
  position: relative;
  z-index: 5;
  padding: 24px 16px;
  display: flex;
  justify-content: center;
}
form{
  display: inline-flex;
  gap: 12px;
  background: rgba(255,255,255,.5);
  backdrop-filter: blur(8px);
  border: 1px solid var(--glass-border);
  padding: 10px;
  border-radius: 999px;
  box-shadow: var(--card-shadow);
}
input[type="search"]{
  width: min(60vw, 320px);
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid transparent;
  font-size: 16px;
  outline: none;
  background: #fff;
}
button[type="submit"]{
  background: #4f46e5;
  border: none;
  border-radius: 999px;
  padding: 10px 18px;
  font-size: 16px;
  color: #fff;
  cursor: pointer;
  transition: transform .2s ease, box-shadow .2s ease;
  box-shadow: 0 6px 18px rgba(79,70,229,.35);
}
button[type="submit"]:hover{ transform: translateY(-1px); }
button[type="submit"]:active{ transform: translateY(0); }

/* ====== Animated Sky ====== */
.sky{
  position: fixed;
  inset: 0;
  z-index: 0;
  overflow: hidden;
  pointer-events: none;
}
.layer{
  position: absolute;
  inset: -10%;
  background-size: 300% 300%;
  animation: drift 20s linear infinite;
  opacity: .9;
  will-change: transform, background-position, filter;
}
.layer-1 { animation-duration: 36s; }
.layer-2 { animation-duration: 54s; }
.layer-3 { animation-duration: 72s; }
@keyframes drift {
  0%{ transform: translate3d(0,0,0) scale(1); }
  50%{ transform: translate3d(-5%, -3%, 0) scale(1.02); }
  100%{ transform: translate3d(0,0,0) scale(1); }
}

/* ====== Weather Themes ====== */
.theme--clear .layer-1{
  background-image:
    radial-gradient(1200px 1200px at 80% 20%, rgba(255,225,140,.65), transparent 60%),
    linear-gradient(120deg, #a8d8f0, #d4f0f9, #a8d8f0);
}
.theme--clear .layer-2{
  background-image:
    radial-gradient(800px 800px at 20% 10%, rgba(255,255,255,.45), transparent 60%),
    linear-gradient(120deg, #a8d8f0, #cfefff, #a8d8f0);
}
.theme--clear .layer-3{
  background-image: linear-gradient(180deg, #cfefff, #e9f8ff 40%, #ffffff);
}
.theme--clouds .layer-1{
  background-image:
    repeating-linear-gradient( to right,
      rgba(255,255,255,.65) 0 180px, rgba(255,255,255,.35) 180px 360px),
    linear-gradient(160deg, #b7c6d6, #dde6ef);
}
.theme--clouds .layer-2{
  background-image:
    repeating-linear-gradient( to right,
      rgba(255,255,255,.45) 0 240px, rgba(255,255,255,.25) 240px 480px);
}
.theme--clouds .layer-3{
  background-image: linear-gradient(180deg, #a7b9cc, #dbe5f1 40%, #eef4fa);
}
.theme--rain .layer-1{
  background-image: linear-gradient(180deg, #6a7a8a, #93a1ad);
}
.theme--rain .layer-2{
  background-image:
    repeating-linear-gradient( 200deg,
      rgba(255,255,255,.14) 0 2px, transparent 2px 9px);
  animation: rain 1.1s linear infinite;
  opacity: .55;
}
.theme--rain .layer-3{
  background-image: linear-gradient(180deg, #50606e, #7a8a99);
}
@keyframes rain {
  0% { background-position: 0 0; }
  100% { background-position: -320px 640px; }
}
.theme--snow .layer-1{
  background-image: linear-gradient(180deg, #93b5d1, #cfe5f3);
}
.theme--snow .layer-2{
  background-image:
    radial-gradient(2px 2px at 20% 20%, rgba(255,255,255,.95) 50%, transparent 51%),
    radial-gradient(2px 2px at 60% 10%, rgba(255,255,255,.9) 50%, transparent 51%),
    radial-gradient(3px 3px at 80% 60%, rgba(255,255,255,.88) 50%, transparent 51%),
    radial-gradient(1.5px 1.5px at 30% 70%, rgba(255,255,255,.92) 50%, transparent 51%);
  animation: snowfall 11s linear infinite;
  background-size: 200px 200px, 220px 220px, 260px 260px, 240px 240px;
  opacity: .92;
}
@keyframes snowfall{
  0%{ background-position: 0 -200px, -50px -220px, 0 -260px, -30px -240px; }
  100%{ background-position: 0 640px, -50px 700px, 0 820px, -30px 760px; }
}
.theme--snow .layer-3{
  background-image: linear-gradient(180deg, #6f93ad, #bcd7e9);
}
.theme--storm .layer-1{
  background-image: linear-gradient(180deg, #2a3340, #485364);
}
.theme--storm .layer-2{
  background-image:
    radial-gradient(1000px 1000px at 40% 10%, rgba(255,255,255,.0) 60%, rgba(255,255,255,.25) 61%, rgba(255,255,255,0) 62%),
    linear-gradient(180deg, #2a3340, #3a4555);
  animation: flash 6s ease-in-out infinite;
}
@keyframes flash{
  0%, 92%, 100% { opacity: 1; filter: brightness(1); }
  95% { filter: brightness(1.85); }
  97% { filter: brightness(1.1); }
}
.theme--fog .layer-1{
  background-image: linear-gradient(180deg, #b9c0c6, #d8dde1);
}
.theme--fog .layer-2{
  background-image:
    radial-gradient(800px 200px at 50% 40%, rgba(255,255,255,.7), transparent 70%),
    radial-gradient(1000px 300px at 50% 60%, rgba(255,255,255,.6), transparent 70%);
  filter: blur(2px);
}
.theme--fog .layer-3{
  background-image: linear-gradient(180deg, #aab3bb, #cfd5db);
}

/* ====== Card ====== */
main{
  position: relative;
  z-index: 5;
  padding: 24px 16px 32px;
}
.current-weather{
  max-width: 860px;
  margin: 40px auto;
  background: var(--glass);
  backdrop-filter: blur(14px);
  border: 1px solid var(--glass-border);
  padding: 24px;
  border-radius: var(--radius);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  box-shadow: var(--card-shadow);
}
.current-weather .meta{ min-width: 220px; }
h1.city{
  margin: 0 0 6px 0;
  font-size: clamp(1.8rem, 4vw, 2.6rem);
  line-height: 1.15;
}
.time, .desc, .details{ margin: 4px 0; }
.reading{
  display: grid;
  grid-template-columns: auto;
  align-items: center;
  justify-items: center;
  gap: 8px;
  min-width: 160px;
}
.temp{
  font-size: clamp(1.8rem, 6vw, 3rem);
  font-weight: 700;
}

/* ====== Icon (SheCodes image) ====== */
.icon {
  width: clamp(68px, 10vw, 96px);
  height: auto;
  display: block;
  filter: drop-shadow(0 6px 16px rgba(0,0,0,.18));
}

/* ====== Helper & Footer ====== */
.helper{
  text-align: center;
  margin: 6px auto 0;
  min-height: 24px;
  opacity: .95;
}
.helper[data-type="error"]{ color: #b91c1c; }
.helper[data-type="info"]{ color: #334155; }
footer{
  position: relative;
  z-index: 5;
  text-align: center;
  padding: 16px 12px 28px;
  font-size: .95rem;
}
footer a{
  color: #111827;
  text-decoration: none;
  border-bottom: 1px dashed rgba(0,0,0,.3);
}
footer a:hover{ border-bottom-style: solid; }

/* ====== Responsive ====== */
@media (max-width: 640px){
  .current-weather{
    flex-direction: column;
    align-items: stretch;
    text-align: center;
  }
  .reading{ grid-auto-flow: row; }
}
